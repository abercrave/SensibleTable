(function(b){b.sensibleTable=function(n,o){var a=this,h=false;a.settings={};a.destroy=function(){b(window).off("redraw resize",j);a.$_element.data("allTheImgs")&&a.$_element.data("allTheImgs").destroy()};var j=function(c){if(c!==undefined&&c.type==="redraw")h=false;if(!h&&b(window).width()<a.settings.breakPoint){h=true;a.$_element.each(function(){p(b(this))})}else if(h&&b(window).width()>=a.settings.breakPoint){h=false;a.$_element.each(function(){var d=b(this);d.removeClass(a.settings.pinnedClass).find("tr").css("height",
"").find("th, td").css("display","");d.closest("."+a.settings.wrapperClass).find("."+a.settings.scrollableClass).remove();d.unwrap().unwrap()})}},p=function(c){var d=c.clone(),e;c.wrap('<div class="'+a.settings.wrapperClass+'" />').find("td:not(:first-child), th:not(:first-child)").css("display","none");e=c.closest("."+a.settings.wrapperClass);e.append(d);c.wrap('<div class="'+a.settings.pinnedClass+'" />');d.removeClass(a.settings.tableClass).wrap('<div class="'+a.settings.scrollableClass+'" />');
switch(a.settings.imagesCheckMethod){case "allTheImgs":e.allTheImgs(function(){k(c,d)});break;case "imagesLoaded":e.imagesLoaded(function(){k(c,d)});break;default:k(c,d)}},k=function(c,d){var e=c.find("tr"),i=[];d.find("tr").each(function(f){b(this).find("th, td").each(function(){var g=b(this),l=g.innerHeight(),m=g.attr("colspan");if(g.css("box-sizing")==="border-box")l+=parseInt(g.css("border-top-width"),10)+parseInt(g.css("border-bottom-width"),10);m&&g.attr("colspan",m-1).html("&nbsp;");i[f]=i[f]||
0;i[f]=Math.max(i[f],l)})});e.each(function(f){b(this).height(i[f])})};a.settings=b.extend({},{tableClass:"sensible-table",wrapperClass:"sensible-table-wrapper",pinnedClass:"sensible-table-pinned",scrollableClass:"sensible-table-scrollable",breakPoint:640,imagesCheckMethod:null},o);a.$_element=n;if(a.settings.imagesCheckMethod&&b.fn[a.settings.imagesCheckMethod]===undefined)a.settings.imagesCheckMethod=null;j();b(window).on("redraw resize",j)}})(jQuery);